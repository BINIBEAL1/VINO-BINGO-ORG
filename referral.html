<!DOCTYPE html>
<html>
<head>
    <title>Vino Bingo - Referral</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="telegram:viewport" content="width=device-width, initial-scale=1.0">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap');
        
        :root {
            --primary: #4CAF50;
            --secondary: #2196F3;
            --accent: #FFD700;
            --dark: #0f1a2a;
            --light: #f8f9fa;
            --background: #1a2a3a;
            --telegram: #0088cc;
            --whatsapp: #25D366;
            --facebook: #3b5998;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            -webkit-tap-highlight-color: transparent;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
            background-color: var(--background);
            color: var(--light);
            min-height: 100vh;
            touch-action: manipulation;
        }
        
        .back-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light);
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s;
            z-index: 10;
        }
        
        .back-btn:active {
            transform: scale(0.95);
        }
        
        .referral-container {
            animation: fadeInUp 0.8s ease;
        }
        
        .referral-header {
            text-align: center;
            margin-bottom: 20px;
        }
        
        .referral-header h1 {
            font-size: 1.6rem;
            margin-bottom: 8px;
            color: var(--accent);
        }
        
        .referral-header p {
            color: rgba(255, 255, 255, 0.7);
            font-size: 0.9rem;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .stat-box {
            text-align: center;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            animation: pulse 2s infinite alternate;
        }
        
        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.8rem;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .referral-link-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            padding: 15px;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .referral-link-title {
            font-size: 1rem;
            margin-bottom: 10px;
            color: var(--accent);
        }
        
        .referral-link {
            background: rgba(0, 0, 0, 0.3);
            padding: 12px;
            border-radius: 8px;
            word-break: break-all;
            font-family: monospace;
            margin-bottom: 15px;
        }
        
        .copy-btn {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            width: 100%;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }
        
        .copy-btn:active {
            transform: scale(0.98);
        }
        
        .share-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .share-btn {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .share-btn:active {
            transform: scale(0.95);
        }
        
        .telegram {
            background: var(--telegram);
        }
        
        .whatsapp {
            background: var(--whatsapp);
        }
        
        .facebook {
            background: var(--facebook);
        }
        
        .program-details {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(5px);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .program-details h2 {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: var(--accent);
        }
        
        .program-details ol {
            padding-left: 20px;
        }
        
        .program-details li {
            margin-bottom: 10px;
        }
        
        @keyframes fadeInUp {
            from { 
                opacity: 0;
                transform: translateY(20px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes pulse {
            from { transform: scale(1); }
            to { transform: scale(1.03); }
        }
        
        /* Telegram WebApp adjustments */
        @media (max-height: 600px) {
            .stat-box {
                padding: 12px;
            }
            
            .share-btn {
                width: 45px;
                height: 45px;
                font-size: 1.3rem;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <button class="back-btn" onclick="window.location.href='index.html'">
        <i class="fas fa-arrow-left"></i>
    </button>
    
    <div class="referral-container">
        <div class="referral-header">
            <h1>Invite Friends & Earn</h1>
            <p>Get 20 points for every friend who joins</p>
        </div>
        
        <div class="stats-container">
            <div class="stat-box">
                <div class="stat-number" id="referralCount">8</div>
                <div class="stat-label">Referrals</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="pointsEarned">160</div>
                <div class="stat-label">Points Earned</div>
            </div>
            <div class="stat-box">
                <div class="stat-number" id="activeReferrals">5</div>
                <div class="stat-label">Active Players</div>
            </div>
            <div class="stat-box">
                <div class="stat-number">Soon</div>
                <div class="stat-label">Birr Value</div>
            </div>
        </div>
        
        <div class="referral-link-container">
            <div class="referral-link-title">Your referral link:</div>
            <div class="referral-link" id="referralLink">
                https://t.me/VinoBingoBot?start=ref-789XYZ
            </div>
            <button class="copy-btn" onclick="copyReferralLink()">
                <i class="fas fa-copy"></i> Copy Link
            </button>
        </div>
        
        <div class="share-buttons">
            <div class="share-btn telegram" onclick="share('telegram')">
                <i class="fab fa-telegram"></i>
            </div>
            <div class="share-btn whatsapp" onclick="share('whatsapp')">
                <i class="fab fa-whatsapp"></i>
            </div>
            <div class="share-btn facebook" onclick="share('facebook')">
                <i class="fab fa-facebook-f"></i>
            </div>
        </div>
        
        <div class="program-details">
            <h2><i class="fas fa-gift"></i> How it works:</h2>
            <ol>
                <li>Share your unique link with friends</li>
                <li>They must register using your link</li>
                <li>You earn <strong>20 points</strong> when they play their first game</li>
                <li>Redeem points for <strong>1 Birr = 2 points</strong></li>
                <li>No limit on how many friends you can refer!</li>
            </ol>
        </div>
    </div>
    
    <script>
        // Referral data
        const referralData = {
            count: 8,
            active: 5, // Active referrals who made deposit
            link: "https://t.me/VinoBingoBot?start=ref-" + generateRefCode()
        };
        
        // Calculate points based on active referrals (20 points per active referral)
        referralData.points = referralData.active * 20;
        
        // Initialize referral page
        function initReferral() {
            document.getElementById('referralCount').textContent = referralData.count;
            document.getElementById('pointsEarned').textContent = referralData.points;
            document.getElementById('activeReferrals').textContent = referralData.active;
            document.getElementById('referralLink').textContent = referralData.link;
            
            // Telegram WebApp setup
            if (window.Telegram && Telegram.WebApp) {
                Telegram.WebApp.expand();
                
                // Get referral data from Telegram
                const tgRef = Telegram.WebApp.initDataUnsafe.start_param;
                if (tgRef && tgRef.startsWith('ref-')) {
                    referralData.link = `https://t.me/VinoBingoBot?start=${tgRef}`;
                    document.getElementById('referralLink').textContent = referralData.link;
                }
            }
        }
        
        // Generate random referral code
        function generateRefCode() {
            const chars = 'ABCDEFGHJKLMNPQRSTUVWXYZ23456789';
            let result = '';
            for (let i = 0; i < 6; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
        
        // Copy referral link
        function copyReferralLink() {
            navigator.clipboard.writeText(referralData.link).then(() => {
                alert("Referral link copied to clipboard!");
                if ('vibrate' in navigator) navigator.vibrate(100);
            });
        }
        
        // Share on social media
        function share(platform) {
            const message = `Join Vino Bingo with my link and we both win! ${referralData.link}`;
            
            let url;
            switch(platform) {
                case 'telegram':
                    url = `https://t.me/share/url?url=${encodeURIComponent(referralData.link)}&text=${encodeURIComponent("Let's play Vino Bingo together!")}`;
                    break;
                case 'whatsapp':
                    url = `https://wa.me/?text=${encodeURIComponent(message)}`;
                    break;
                case 'facebook':
                    url = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(referralData.link)}`;
                    break;
            }
            
            // Vibrate on share
            if ('vibrate' in navigator) navigator.vibrate(50);
            
            window.open(url, '_blank');
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', initReferral);
    </script>
</body>
</html>